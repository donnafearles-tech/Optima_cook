{
  "entities": {
    "User": {
      "title": "User",
      "type": "object",
      "description": "Represents a user of the application.",
      "properties": {
        "name": { "type": "string", "description": "The user's display name." },
        "email": { "type": "string", "description": "The user's email address.", "format": "email" }
      }
    },
    "UserResource": {
      "title": "UserResource",
      "type": "object",
      "description": "Represents a kitchen resource owned by a user.",
      "properties": {
        "name": { "type": "string", "description": "The name of the resource (e.g., 'Sartén Grande')." },
        "quantity": { "type": "number", "description": "The quantity of this resource available." },
        "keywords": {
          "type": "array",
          "items": { "type": "string" },
          "description": "Keywords to auto-link this resource to tasks (e.g., 'saltear', 'freír')."
        }
      },
      "required": ["name", "quantity", "keywords"]
    },
    "Project": {
      "title": "Project",
      "type": "object",
      "description": "Represents a cooking project.",
      "properties": {
        "name": { "type": "string", "description": "The name of the project." },
        "description": { "type": "string", "description": "A description of the project." },
        "creationDate": { "type": "string", "format": "date-time", "description": "The date the project was created." },
        "estimatedTotalDuration": { "type": "number", "description": "The estimated total duration in seconds." }
      },
      "required": ["name", "creationDate"]
    },
    "Recipe": {
      "title": "Recipe",
      "type": "object",
      "description": "Represents a single recipe within a project.",
      "properties": {
        "name": { "type": "string", "description": "The name of the recipe." }
      },
      "required": ["name"]
    },
    "Task": {
      "title": "Task",
      "type": "object",
      "description": "Represents a single task within a recipe.",
      "properties": {
        "name": { "type": "string", "description": "The name of the task." },
        "duration": { "type": "number", "description": "The duration of the task in seconds." },
        "recipeId": { "type": "string", "description": "The ID of the recipe this task belongs to." },
        "predecessorIds": {
          "type": "array",
          "items": { "type": "string" },
          "description": "An array of task IDs that must be completed before this task can start."
        },
        "resourceIds": {
          "type": "array",
          "items": { "type": "string" },
          "description": "An array of resource IDs required for this task."
        },
        "status": { "type": "string", "enum": ["pending", "in_progress", "completed"], "description": "The current status of the task." },
         "isAssemblyStep": { "type": "boolean", "description": "Indica si la tarea es un paso de ensamblaje final." }
      },
      "required": ["name", "duration", "recipeId", "predecessorIds", "status", "resourceIds"]
    }
  },
  "auth": {
    "providers": ["anonymous"]
  },
  "firestore": {
    "'/users/{userId}'": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores user profile information."
    },
    "'/users/{userId}/resources/{resourceId}'": {
        "schema": { "$ref": "#/entities/UserResource"},
        "description": "Stores a user's available kitchen resources."
    },
    "'/users/{userId}/projects/{projectId}'": {
      "schema": { "$ref": "#/entities/Project" },
      "description": "Stores a user's cooking projects."
    },
    "'/users/{userId}/projects/{projectId}/recipes/{recipeId}'": {
      "schema": { "$ref": "#/entities/Recipe" },
      "description": "Stores all recipes for a specific project."
    },
    "'/users/{userId}/projects/{projectId}/tasks/{taskId}'": {
      "schema": { "$ref": "#/entities/Task" },
      "description": "Stores all tasks for a specific project."
    }
  }
}
